# Руководство по безопасности

## Действия при утечке секретов

1. **Немедленные действия**
   - Отзовите все скомпрометированные токены
   - Создайте новые токены
   - Обновите все сервисы, использующие старые токены

2. **Очистка репозитория**
   ```bash
   # Удаление файла с секретами из истории
   git filter-branch --force --index-filter "git rm --cached --ignore-unmatch .env" --prune-empty --tag-name-filter cat -- --all
   
   # Принудительное обновление удаленного репозитория
   git push origin main --force
   ```

3. **Предотвращение утечек**
   - Установите pre-commit хуки:
     ```bash
     pip install pre-commit
     pre-commit install
     ```
   - Настройте GitHub Push Protection
   - Регулярно проверяйте историю коммитов

## Работа с конфиденциальными данными

### API Токены и Ключи
1. **Никогда не коммитьте токены и ключи в репозиторий**
   - Используйте `.env` файл для локальной разработки
   - Файл `.env` добавлен в `.gitignore`
   - Используйте `.env.example` как шаблон

2. **Настройка переменных окружения**
   - Локальная разработка:
     ```bash
     cp .env.example .env
     # Заполните .env своими значениями
     ```
   - Продакшн (Render.com):
     - Добавьте переменные через веб-интерфейс
     - Используйте секреты для хранения токенов

3. **Ротация ключей**
   - Регулярно обновляйте все API ключи
   - При компрометации немедленно отзывайте токены
   - Храните историю изменений ключей

### Безопасное хранение
1. **Локальная разработка**
   - Храните `.env` файл только локально
   - Не передавайте токены через незащищенные каналы
   - Используйте менеджер паролей для хранения

2. **Продакшн окружение**
   - Используйте переменные окружения Render
   - Включите шифрование для всех секретов
   - Ограничьте доступ к переменным окружения

### Проверка безопасности
1. **Перед коммитом**
   - Проверьте файлы на наличие токенов
   - Используйте git-hooks для автоматической проверки
   - Проверьте `.gitignore`

2. **Мониторинг**
   - Регулярно проверяйте логи на утечки
   - Настройте оповещения о подозрительной активности
   - Следите за обновлениями безопасности

## Рекомендации для разработчиков

### При работе с репозиторием
1. Не используйте реальные токены в тестах
2. Не храните токены в комментариях кода
3. Не отправляйте токены через системы логирования

### При деплое
1. Проверьте все переменные окружения
2. Убедитесь в правильности настроек безопасности
3. Протестируйте работу с тестовыми токенами

### При обнаружении проблем
1. Немедленно отзовите скомпрометированные токены
2. Сообщите о проблеме команде безопасности
3. Обновите документацию по безопасности

## Контакты
При обнаружении проблем с безопасностью, свяжитесь с командой разработки:
- Email: security@example.com
- Telegram: @security_team 